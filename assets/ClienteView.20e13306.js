import{d as T,O as z,j as y,m as M,u as o,D as j,y as e,v as O,x as E,M as d,N as h,a6 as I,a4 as H,a5 as K,r as V,I as Q,o as U,w as W,V as X,g as Y,ae as Z,n as s,q as i,E as N,a3 as P,a9 as L,k as q,G as S}from"./index.957b2bab.js";import{_ as ee}from"./SpinLoading.af9677a4.js";import{u as ae,F as te}from"./vee-validate.esm.160e0317.js";import{_ as G}from"./Tag.d9240074.js";import{_ as $}from"./TextInput.vue_vue_type_script_setup_true_lang.7e6b015f.js";const se=["for"],oe=["name","id","value","placeholder","disabled","autocomplete"],le=T({__name:"SelectInput",props:{initialValue:{type:String,default:""},name:{type:String,required:!0},label:{type:String,required:!0},successMessage:{type:String,default:""},placeholder:{type:String,default:""},autocomplete:{type:String,default:""},disabled:{type:Boolean,default:!1}},setup(c){const k=c,n=z(k,"name"),{value:B,errorMessage:a,handleBlur:m,handleChange:u,meta:r}=ae(n,void 0,{initialValue:k.initialValue});return(x,l)=>(y(),M("div",{class:E(["flex flex-col",{"has-error":!!e(a),success:e(r).valid}])},[o("label",{for:e(n)},j(c.label),9,se),o("select",{name:e(n),id:e(n),value:e(B),placeholder:c.placeholder,onInput:l[0]||(l[0]=(...v)=>e(u)&&e(u)(...v)),onBlur:l[1]||(l[1]=(...v)=>e(m)&&e(m)(...v)),disabled:c.disabled,class:E(["rounded-md border-2 border-transparent outline-none transition duration-300 ease-in-out focus:outline-none focus:ring-0 placeholder:italic",{"bg-slate-200 focus:border-teal-500":!e(a),"bg-red-200 focus:border-red-500 text-red-700 placeholder:text-red-500":!!e(a)}]),autocomplete:c.autocomplete},[O(x.$slots,"default")],42,oe),d(o("p",{class:"text-red-500"},j(e(a)),513),[[h,e(a)]]),d(o("p",{class:"text-green-500"},j(c.successMessage),513),[[h,e(r).valid]])],2))}}),ne={key:0,class:"h-full block p-6 shadow-lg bg-white"},ie={class:"mb-5"},re=S(" < Voltar "),ce=S(" Criar cliente "),ue={class:"mb-2"},de=S(" Ativo "),me=S(" Inativo "),pe=o("option",{value:"0"},"F\xEDsico",-1),fe=o("option",{value:"1"},"Jur\xEDdico",-1),_e={class:""},he={class:"flex"},ve={class:"flex items-center"},be=S(" Gravando... "),ge={key:0,class:"text-red-700 mt-3 mb-0"},we={__name:"ClienteView",setup(c){const k=I(),n=H(),B=K(),a=V({}),m=V(null),u=V(!0),r=Q(()=>n.params.id===void 0);U(async()=>{x()}),W(()=>n.params,(b,t)=>{x()},{deep:!0});async function x(){u.value=!0,n.params.id?k.getCliente(n.params.id).then(b=>{const t=b.data;a.value={idCliente:t.idCliente,nome:t.nome,tipo:t.tipo,cnpjCpf:t.cnpjCpf,email:t.usuario.email,senha:""},u.value=!1}):(a.value={tipo:1,usuario:{}},X(()=>{m.value&&m.value.resetForm()}),u.value=!1)}let l=V(!1);function v(b,{setFieldError:t,setErrors:p,resetForm:R}){p({});const w=I(),{nome:f,tipo:A,cnpjCpf:J,email:F,senha:g}=b,D=J.replaceAll(".","").replaceAll("-","").replaceAll("/","");let C=0;if(f.length===0&&(t("nome","Nome n\xE3o informado."),C++),F.length===0&&(t("email","E-mail n\xE3o informado."),C++),r.value?g.length===0&&(t("senha","Senha n\xE3o informada."),C++):g.length!==0&&g.length<8&&(t("senha","Senha deve ter pelo menos 8 caract\xE9res."),C++),!(C>0))return l.value=!0,r.value?w.postCliente(f,A,D,F,g).then(_=>{P({group:"ok",title:"Cliente criado com sucesso."}),B.push(`/clientes/${_.data.idCliente}`)}).catch(_=>p({apiError:_})).finally(()=>l.value=!1):w.putCliente(a.value.idCliente,f,A,D,F,g).then(_=>{P({group:"ok",title:"Cliente alterado com sucesso."})}).catch(_=>p({apiError:_})).finally(()=>l.value=!1)}return(b,t)=>{const p=Y("RouterLink"),R=ee,w=Z("mask");return u.value?N("",!0):(y(),M("div",ne,[o("div",ie,[s(p,{to:"/clientes"},{default:i(()=>[s(L,{class:"mr-2"},{default:i(()=>[re]),_:1})]),_:1}),d(s(p,{to:{name:"cliente_novo"}},{default:i(()=>[s(L,{class:""},{default:i(()=>[ce]),_:1})]),_:1},512),[[h,!e(r)]])]),s(e(te),{onSubmit:v,"initial-values":a.value,ref_key:"form",ref:m},{default:i(({errors:f})=>[s($,{name:"nome",type:"text",label:"Nome",placeholder:"Nome",class:"mb-2"}),d(o("div",ue,[a.value.situacao===1?(y(),q(G,{key:0,customColor:"green"},{default:i(()=>[de]),_:1})):N("",!0),a.value.situacao===0?(y(),q(G,{key:1,customColor:"orange"},{default:i(()=>[me]),_:1})):N("",!0)],512),[[h,!e(r)]]),s($,{name:"email",type:"email",label:"E-mail",placeholder:"Endere\xE7o de e-mail",class:"mb-2"}),s(le,{name:"tipo",label:"Tipo",class:"mb-2"},{default:i(()=>[pe,fe]),_:1}),d(s($,{name:"cnpjCpf",type:"text",label:"CNPJ/CPF",placeholder:"CNPJ/CPF",class:"mb-2"},null,512),[[w,["###.###.###-##","##.###.###/####-##"]]]),s($,{name:"senha",type:"password",label:e(r)?"Senha":"Senha (preencher apenas caso deseje trocar a senha)",autocomplete:"new-password",placeholder:"Senha",class:"mb-4"},null,8,["label"]),o("div",_e,[s(L,{disabled:e(l)},{default:i(()=>[d(o("div",he,[o("div",ve,[s(R,{class:"mr-2"}),be])],512),[[h,e(l)]]),d(o("div",null," Gravar ",512),[[h,!e(l)]])]),_:1},8,["disabled"])]),f.apiError?(y(),M("div",ge,j(f.apiError),1)):N("",!0)]),_:1},8,["initial-values"])]))}}};export{we as default};
