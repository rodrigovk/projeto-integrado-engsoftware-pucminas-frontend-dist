import{d as Se,O as ee,P as Be,h as be,Q as Ye,l as z,y as f,o as Xe,R as Qe,S as Ae,w as X,a as Ze,r as Q,U as Re,V as ye,W as Je,X as gn,Y as xe,Z as Vn}from"./index.7ebe12a4.js";/**
  * vee-validate v4.6.5
  * (c) 2022 Abdelrahman Awad
  * @license MIT
  */function fe(e){return typeof e=="function"}function he(e){return e==null}const ue=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function en(e){return Number(e)>=0}function On(e){const n=parseFloat(e);return isNaN(n)?e:n}const pn={};function bn(e){return pn[e]}const le=Symbol("vee-validate-form"),An=Symbol("vee-validate-field-instance"),Fe=Symbol("Default empty value");function ke(e){return fe(e)&&!!e.__locatorRef}function ge(e){return!!e&&fe(e.validate)}function ve(e){return e==="checkbox"||e==="radio"}function Fn(e){return ue(e)||Array.isArray(e)}function nn(e){return Array.isArray(e)?e.length===0:ue(e)&&Object.keys(e).length===0}function Ee(e){return/^\[.+\]$/i.test(e)}function Sn(e){return tn(e)&&e.multiple}function tn(e){return e.tagName==="SELECT"}function En(e,n){const t=![!1,null,void 0,0].includes(n.multiple)&&!Number.isNaN(n.multiple);return e==="select"&&"multiple"in n&&t}function wn(e,n){return!En(e,n)&&n.type!=="file"&&!ve(n.type)}function rn(e){return Ne(e)&&e.target&&"submit"in e.target}function Ne(e){return e?!!(typeof Event<"u"&&fe(Event)&&e instanceof Event||e&&e.srcElement):!1}function De(e,n){return n in e&&e[n]!==Fe}var $e=function e(n,t){if(n===t)return!0;if(n&&t&&typeof n=="object"&&typeof t=="object"){if(n.constructor!==t.constructor)return!1;var i,r,a;if(Array.isArray(n)){if(i=n.length,i!=t.length)return!1;for(r=i;r--!==0;)if(!e(n[r],t[r]))return!1;return!0}if(n.constructor===RegExp)return n.source===t.source&&n.flags===t.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===t.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===t.toString();if(a=Object.keys(n),i=a.length,i!==Object.keys(t).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[r]))return!1;for(r=i;r--!==0;){var l=a[r];if(!e(n[l],t[l]))return!1}return!0}return n!==n&&t!==t};function Te(e){return Ee(e)?e.replace(/\[|\]/gi,""):e}function C(e,n,t){return e?Ee(n)?e[Te(n)]:(n||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((r,a)=>Fn(r)&&a in r?r[a]:t,e):t}function ae(e,n,t){if(Ee(n)){e[Te(n)]=t;return}const i=n.split(/\.|\[(\d+)\]/).filter(Boolean);let r=e;for(let a=0;a<i.length;a++){if(a===i.length-1){r[i[a]]=t;return}(!(i[a]in r)||he(r[i[a]]))&&(r[i[a]]=en(i[a+1])?[]:{}),r=r[i[a]]}}function je(e,n){if(Array.isArray(e)&&en(n)){e.splice(Number(n),1);return}ue(e)&&delete e[n]}function _e(e,n){if(Ee(n)){delete e[Te(n)];return}const t=n.split(/\.|\[(\d+)\]/).filter(Boolean);let i=e;for(let a=0;a<t.length;a++){if(a===t.length-1){je(i,t[a]);break}if(!(t[a]in i)||he(i[t[a]]))break;i=i[t[a]]}const r=t.map((a,l)=>C(e,t.slice(0,l).join(".")));for(let a=r.length-1;a>=0;a--)if(!!nn(r[a])){if(a===0){je(e,t[0]);continue}je(r[a-1],t[a-1])}}function D(e){return Object.keys(e)}function Ve(e,n=void 0){const t=xe();return(t==null?void 0:t.provides[e])||Ye(e,n)}function Me(e){Je(`[vee-validate]: ${e}`)}function Ce(e,n,t){if(Array.isArray(e)){const i=[...e],r=i.findIndex(a=>$e(a,n));return r>=0?i.splice(r,1):i.push(n),i}return $e(e,n)?t:n}function Le(e,n=0){let t=null,i=[];return function(...r){return t&&window.clearTimeout(t),t=window.setTimeout(()=>{const a=e(...r);i.forEach(l=>l(a)),i=[]},n),new Promise(a=>i.push(a))}}function jn(e,n){if(!!ue(n))return n.number?On(e):e}const we=(e,n,t)=>n.slots.default?typeof e=="string"||!e?n.slots.default(t()):{default:()=>{var i,r;return(r=(i=n.slots).default)===null||r===void 0?void 0:r.call(i,t())}}:n.slots.default;function Ie(e){if(an(e))return e._value}function an(e){return"_value"in e}function Pe(e){if(!Ne(e))return e;const n=e.target;if(ve(n.type)&&an(n))return Ie(n);if(n.type==="file"&&n.files){const t=Array.from(n.files);return n.multiple?t:t[0]}if(Sn(n))return Array.from(n.options).filter(t=>t.selected&&!t.disabled).map(Ie);if(tn(n)){const t=Array.from(n.options).find(i=>i.selected);return t?Ie(t):n.value}return n.value}function un(e){const n={};return Object.defineProperty(n,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?ue(e)&&e._$$isNormalized?e:ue(e)?Object.keys(e).reduce((t,i)=>{const r=_n(e[i]);return e[i]!==!1&&(t[i]=qe(r)),t},n):typeof e!="string"?n:e.split("|").reduce((t,i)=>{const r=Mn(i);return r.name&&(t[r.name]=qe(r.params)),t},n):n}function _n(e){return e===!0?[]:Array.isArray(e)||ue(e)?e:[e]}function qe(e){const n=t=>typeof t=="string"&&t[0]==="@"?In(t.slice(1)):t;return Array.isArray(e)?e.map(n):e instanceof RegExp?[e]:Object.keys(e).reduce((t,i)=>(t[i]=n(e[i]),t),{})}const Mn=e=>{let n=[];const t=e.split(":")[0];return e.includes(":")&&(n=e.split(":").slice(1).join(":").split(",")),{name:t,params:n}};function In(e){const n=t=>C(t,e)||t[e];return n.__locatorRef=e,n}function kn(e){return Array.isArray(e)?e.filter(ke):D(e).filter(n=>ke(e[n])).map(n=>e[n])}const Cn={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let Bn=Object.assign({},Cn);const Ue=()=>Bn;async function ln(e,n,t={}){const i=t==null?void 0:t.bails,r={name:(t==null?void 0:t.name)||"{field}",rules:n,bails:i!=null?i:!0,formData:(t==null?void 0:t.values)||{}},l=(await Rn(r,e)).errors;return{errors:l,valid:!l.length}}async function Rn(e,n){if(ge(e.rules))return Nn(n,e.rules,{bails:e.bails});if(fe(e.rules)||Array.isArray(e.rules)){const l={field:e.name,form:e.formData,value:n},m=Array.isArray(e.rules)?e.rules:[e.rules],s=m.length,y=[];for(let A=0;A<s;A++){const g=m[A],F=await g(n,l);if(typeof F!="string"&&F)continue;const R=typeof F=="string"?F:on(l);if(y.push(R),e.bails)return{errors:y}}return{errors:y}}const t=Object.assign(Object.assign({},e),{rules:un(e.rules)}),i=[],r=Object.keys(t.rules),a=r.length;for(let l=0;l<a;l++){const m=r[l],s=await Tn(t,n,{name:m,params:t.rules[m]});if(s.error&&(i.push(s.error),e.bails))return{errors:i}}return{errors:i}}async function Nn(e,n,t){var i;return{errors:await n.validate(e,{abortEarly:(i=t.bails)!==null&&i!==void 0?i:!0}).then(()=>[]).catch(a=>{if(a.name==="ValidationError")return a.errors;throw a})}}async function Tn(e,n,t){const i=bn(t.name);if(!i)throw new Error(`No such validator '${t.name}' exists.`);const r=Pn(t.params,e.formData),a={field:e.name,value:n,form:e.formData,rule:Object.assign(Object.assign({},t),{params:r})},l=await i(n,r,a);return typeof l=="string"?{error:l}:{error:l?void 0:on(a)}}function on(e){const n=Ue().generateMessage;return n?n(e):"Field is invalid"}function Pn(e,n){const t=i=>ke(i)?i(n):i;return Array.isArray(e)?e.map(t):Object.keys(e).reduce((i,r)=>(i[r]=t(e[r]),i),{})}async function Un(e,n){const t=await e.validate(n,{abortEarly:!1}).then(()=>[]).catch(a=>{if(a.name!=="ValidationError")throw a;return a.inner||[]}),i={},r={};for(const a of t){const l=a.errors;i[a.path]={valid:!l.length,errors:l},l.length&&(r[a.path]=l[0])}return{valid:!t.length,results:i,errors:r}}async function zn(e,n,t){const r=D(e).map(async y=>{var A,g,F;const I=await ln(C(n,y),e[y],{name:((A=t==null?void 0:t.names)===null||A===void 0?void 0:A[y])||y,values:n,bails:(F=(g=t==null?void 0:t.bailsMap)===null||g===void 0?void 0:g[y])!==null&&F!==void 0?F:!0});return Object.assign(Object.assign({},I),{path:y})});let a=!0;const l=await Promise.all(r),m={},s={};for(const y of l)m[y.path]={valid:y.valid,errors:y.errors},y.valid||(a=!1,s[y.path]=y.errors[0]);return{valid:a,results:m,errors:s}}function Ge(e,n,t){typeof t.value=="object"&&(t.value=B(t.value)),!t.enumerable||t.get||t.set||!t.configurable||!t.writable||n==="__proto__"?Object.defineProperty(e,n,t):e[n]=t.value}function B(e){if(typeof e!="object")return e;var n=0,t,i,r,a=Object.prototype.toString.call(e);if(a==="[object Object]"?r=Object.create(e.__proto__||null):a==="[object Array]"?r=Array(e.length):a==="[object Set]"?(r=new Set,e.forEach(function(l){r.add(B(l))})):a==="[object Map]"?(r=new Map,e.forEach(function(l,m){r.set(B(m),B(l))})):a==="[object Date]"?r=new Date(+e):a==="[object RegExp]"?r=new RegExp(e.source,e.flags):a==="[object DataView]"?r=new e.constructor(B(e.buffer)):a==="[object ArrayBuffer]"?r=e.slice(0):a.slice(-6)==="Array]"&&(r=new e.constructor(e)),r){for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)Ge(r,i[n],Object.getOwnPropertyDescriptor(e,i[n]));for(n=0,i=Object.getOwnPropertyNames(e);n<i.length;n++)Object.hasOwnProperty.call(r,t=i[n])&&r[t]===e[t]||Ge(r,t,Object.getOwnPropertyDescriptor(e,t))}return r||e}var Z=function e(n,t){if(n===t)return!0;if(n&&t&&typeof n=="object"&&typeof t=="object"){if(n.constructor!==t.constructor)return!1;var i,r,a;if(Array.isArray(n)){if(i=n.length,i!=t.length)return!1;for(r=i;r--!==0;)if(!e(n[r],t[r]))return!1;return!0}if(n instanceof Map&&t instanceof Map){if(n.size!==t.size)return!1;for(r of n.entries())if(!t.has(r[0]))return!1;for(r of n.entries())if(!e(r[1],t.get(r[0])))return!1;return!0}if(n instanceof Set&&t instanceof Set){if(n.size!==t.size)return!1;for(r of n.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(n)&&ArrayBuffer.isView(t)){if(i=n.length,i!=t.length)return!1;for(r=i;r--!==0;)if(n[r]!==t[r])return!1;return!0}if(n.constructor===RegExp)return n.source===t.source&&n.flags===t.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===t.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===t.toString();if(a=Object.keys(n),i=a.length,i!==Object.keys(t).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[r]))return!1;for(r=i;r--!==0;){var l=a[r];if(!e(n[l],t[l]))return!1}return!0}return n!==n&&t!==t};let We=0;function Dn(e,n){const{value:t,initialValue:i,setInitialValue:r}=sn(e,n.modelValue,!n.standalone),{errorMessage:a,errors:l,setErrors:m}=Ln(e,!n.standalone),s=$n(t,i,l),y=We>=Number.MAX_SAFE_INTEGER?0:++We;function A(g){var F;"value"in g&&(t.value=g.value),"errors"in g&&m(g.errors),"touched"in g&&(s.touched=(F=g.touched)!==null&&F!==void 0?F:s.touched),"initialValue"in g&&r(g.initialValue)}return{id:y,path:e,value:t,initialValue:i,meta:s,errors:l,errorMessage:a,setState:A}}function sn(e,n,t=!0){const i=t===!0?Ve(le,void 0):void 0,r=Q(f(n));function a(){return i?C(i.meta.value.initialValues,f(e),f(r)):f(r)}function l(A){if(!i){r.value=A;return}i.stageInitialValue(f(e),A,!0)}const m=z(a);if(!i)return{value:Q(a()),initialValue:m,setInitialValue:l};const s=n?f(n):C(i.values,f(e),f(m));return i.stageInitialValue(f(e),s,!0),{value:z({get(){return C(i.values,f(e))},set(A){i.setFieldValue(f(e),A)}}),initialValue:m,setInitialValue:l}}function $n(e,n,t){const i=Re({touched:!1,pending:!1,valid:!0,validated:!!f(t).length,initialValue:z(()=>f(n)),dirty:z(()=>!Z(f(e),f(n)))});return X(t,r=>{i.valid=!r.length},{immediate:!0,flush:"sync"}),i}function Ln(e,n){const t=n?Ve(le,void 0):void 0;function i(a){return a?Array.isArray(a)?a:[a]:[]}if(!t){const a=Q([]);return{errors:a,errorMessage:z(()=>a.value[0]),setErrors:l=>{a.value=i(l)}}}const r=z(()=>t.errorBag.value[f(e)]||[]);return{errors:r,errorMessage:z(()=>r.value[0]),setErrors:a=>{t.setFieldErrorBag(f(e),i(a))}}}function qn(e,n,t){return ve(t==null?void 0:t.type)?Hn(e,n,t):dn(e,n,t)}function dn(e,n,t){const{initialValue:i,validateOnMount:r,bails:a,type:l,checkedValue:m,label:s,validateOnValueUpdate:y,uncheckedValue:A,standalone:g,keepValueOnUnmount:F,modelPropName:I,syncVModel:R}=Gn(f(e),t),w=g?void 0:Ve(le);let q=!1;const{id:L,value:P,initialValue:v,meta:c,setState:S,errors:b,errorMessage:E}=Dn(e,{modelValue:i,standalone:g});R&&Kn({value:P,prop:I,handleChange:K});const V=()=>{c.touched=!0},M=z(()=>{let d=f(n);const _=f(w==null?void 0:w.schema);return _&&!ge(_)&&(d=Wn(_,f(e))||d),ge(d)||fe(d)||Array.isArray(d)?d:un(d)});async function j(d){var _,U;return w!=null&&w.validateSchema?(_=(await w.validateSchema(d)).results[f(e)])!==null&&_!==void 0?_:{valid:!0,errors:[]}:ln(P.value,M.value,{name:f(s)||f(e),values:(U=w==null?void 0:w.values)!==null&&U!==void 0?U:{},bails:a})}async function k(){c.pending=!0,c.validated=!0;const d=await j("validated-only");return q&&(d.valid=!0,d.errors=[]),S({errors:d.errors}),c.pending=!1,d}async function N(){const d=await j("silent");return q&&(d.valid=!0),c.valid=d.valid,d}function W(d){return!(d!=null&&d.mode)||(d==null?void 0:d.mode)==="force"||(d==null?void 0:d.mode)==="validated-only"?k():N()}function K(d,_=!0){const U=Pe(d);P.value=U,!y&&_&&k()}Xe(()=>{if(r)return k();(!w||!w.validateSchema)&&N()});function G(d){c.touched=d}let J;function H(){J=X(P,(d,_)=>{if(Z(d,_))return;(y?k:N)()},{deep:!0})}H();function ie(d){var _;J==null||J();const U=d&&"value"in d?d.value:v.value;S({value:B(U),initialValue:B(U),touched:(_=d==null?void 0:d.touched)!==null&&_!==void 0?_:!1,errors:(d==null?void 0:d.errors)||[]}),c.pending=!1,c.validated=!1,N(),ye(()=>{H()})}function ne(d){P.value=d}function oe(d){S({errors:Array.isArray(d)?d:[d]})}const te={id:L,name:e,label:s,value:P,meta:c,errors:b,errorMessage:E,type:l,checkedValue:m,uncheckedValue:A,bails:a,keepValueOnUnmount:F,resetField:ie,handleReset:()=>ie(),validate:W,handleChange:K,handleBlur:V,setState:S,setTouched:G,setErrors:oe,setValue:ne};if(Qe(An,te),Ae(n)&&typeof f(n)!="function"&&X(n,(d,_)=>{Z(d,_)||(c.validated?k():N())},{deep:!0}),!w)return te;w.register(te),Ze(()=>{q=!0,w.unregister(te)});const Oe=z(()=>{const d=M.value;return!d||fe(d)||ge(d)||Array.isArray(d)?{}:Object.keys(d).reduce((_,U)=>{const se=kn(d[U]).map(re=>re.__locatorRef).reduce((re,de)=>{const pe=C(w.values,de)||w.values[de];return pe!==void 0&&(re[de]=pe),re},{});return Object.assign(_,se),_},{})});return X(Oe,(d,_)=>{if(!Object.keys(d).length)return;!Z(d,_)&&(c.validated?k():N())}),te}function Gn(e,n){const t=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,rules:"",label:e,validateOnValueUpdate:!0,standalone:!1,keepValueOnUnmount:void 0,modelPropName:"modelValue",syncVModel:!0});if(!n)return t();const i="valueProp"in n?n.valueProp:n.checkedValue;return Object.assign(Object.assign(Object.assign({},t()),n||{}),{checkedValue:i})}function Wn(e,n){if(!!e)return e[n]}function Hn(e,n,t){const i=t!=null&&t.standalone?void 0:Ve(le),r=t==null?void 0:t.checkedValue,a=t==null?void 0:t.uncheckedValue;function l(m){const s=m.handleChange,y=z(()=>{const g=f(m.value),F=f(r);return Array.isArray(g)?g.findIndex(I=>Z(I,F))>=0:Z(F,g)});function A(g,F=!0){var I;if(y.value===((I=g==null?void 0:g.target)===null||I===void 0?void 0:I.checked))return;let R=Pe(g);i||(R=Ce(f(m.value),f(r),f(a))),s(R,F)}return Object.assign(Object.assign({},m),{checked:y,checkedValue:r,uncheckedValue:a,handleChange:A})}return l(dn(e,n,t))}function Kn({prop:e,value:n,handleChange:t}){const i=xe();if(!i)return;const r=e||"modelValue",a=`update:${r}`;r in i.props&&(X(n,l=>{Z(l,He(i,r))||i.emit(a,l)}),X(()=>He(i,r),l=>{if(l===Fe&&n.value===void 0)return;const m=l===Fe?void 0:l;Z(m,jn(n.value,i.props.modelModifiers))||t(m)}))}function He(e,n){return e.props[n]}Se({name:"Field",inheritAttrs:!1,props:{as:{type:[String,Object],default:void 0},name:{type:String,required:!0},rules:{type:[Object,String,Function],default:void 0},validateOnMount:{type:Boolean,default:!1},validateOnBlur:{type:Boolean,default:void 0},validateOnChange:{type:Boolean,default:void 0},validateOnInput:{type:Boolean,default:void 0},validateOnModelUpdate:{type:Boolean,default:void 0},bails:{type:Boolean,default:()=>Ue().bails},label:{type:String,default:void 0},uncheckedValue:{type:null,default:void 0},modelValue:{type:null,default:Fe},modelModifiers:{type:null,default:()=>({})},"onUpdate:modelValue":{type:null,default:void 0},standalone:{type:Boolean,default:!1},keepValue:{type:Boolean,default:void 0}},setup(e,n){const t=ee(e,"rules"),i=ee(e,"name"),r=ee(e,"label"),a=ee(e,"uncheckedValue"),l=ee(e,"keepValue"),{errors:m,value:s,errorMessage:y,validate:A,handleChange:g,handleBlur:F,setTouched:I,resetField:R,handleReset:w,meta:q,checked:L,setErrors:P}=qn(i,t,{validateOnMount:e.validateOnMount,bails:e.bails,standalone:e.standalone,type:n.attrs.type,initialValue:Xn(e,n),checkedValue:n.attrs.value,uncheckedValue:a,label:r,validateOnValueUpdate:!1,keepValueOnUnmount:l}),v=function(M,j=!0){g(M,j),n.emit("update:modelValue",s.value)},c=V=>{ve(n.attrs.type)||(s.value=Pe(V))},S=function(M){c(M),n.emit("update:modelValue",s.value)},b=z(()=>{const{validateOnInput:V,validateOnChange:M,validateOnBlur:j,validateOnModelUpdate:k}=Yn(e),N=[F,n.attrs.onBlur,j?A:void 0].filter(Boolean),W=[H=>v(H,V),n.attrs.onInput].filter(Boolean),K=[H=>v(H,M),n.attrs.onChange].filter(Boolean),G={name:e.name,onBlur:N,onInput:W,onChange:K};G["onUpdate:modelValue"]=H=>v(H,k),ve(n.attrs.type)&&L&&(G.checked=L.value);const J=Ke(e,n);return wn(J,n.attrs)&&(G.value=s.value),G});function E(){return{field:b.value,value:s.value,meta:q,errors:m.value,errorMessage:y.value,validate:A,resetField:R,handleChange:v,handleInput:S,handleReset:w,handleBlur:F,setTouched:I,setErrors:P}}return n.expose({setErrors:P,setTouched:I,reset:R,validate:A,handleChange:g}),()=>{const V=Be(Ke(e,n)),M=we(V,n,E);return V?be(V,Object.assign(Object.assign({},n.attrs),b.value),M):M}}});function Ke(e,n){let t=e.as||"";return!e.as&&!n.slots.default&&(t="input"),t}function Yn(e){var n,t,i,r;const{validateOnInput:a,validateOnChange:l,validateOnBlur:m,validateOnModelUpdate:s}=Ue();return{validateOnInput:(n=e.validateOnInput)!==null&&n!==void 0?n:a,validateOnChange:(t=e.validateOnChange)!==null&&t!==void 0?t:l,validateOnBlur:(i=e.validateOnBlur)!==null&&i!==void 0?i:m,validateOnModelUpdate:(r=e.validateOnModelUpdate)!==null&&r!==void 0?r:s}}function Xn(e,n){return ve(n.attrs.type)?De(e,"modelValue")?e.modelValue:void 0:De(e,"modelValue")?e.modelValue:n.attrs.value}let Qn=0;function Zn(e){var n;const t=Qn++;let i=!1;const r=Q({}),a=Q(!1),l=Q(0),m=[],s=Re(B(f(e==null?void 0:e.initialValues)||{})),{errorBag:y,setErrorBag:A,setFieldErrorBag:g}=et(e==null?void 0:e.initialErrors),F=z(()=>D(y.value).reduce((u,o)=>{const O=y.value[o];return O&&O.length&&(u[o]=O[0]),u},{}));function I(u){const o=r.value[u];return Array.isArray(o)?o[0]:o}function R(u){return!!r.value[u]}const w=z(()=>D(r.value).reduce((u,o)=>{const O=I(o);return O&&(u[o]=f(O.label||O.name)||""),u},{})),q=z(()=>D(r.value).reduce((u,o)=>{var O;const p=I(o);return p&&(u[o]=(O=p.bails)!==null&&O!==void 0?O:!0),u},{})),L=Object.assign({},(e==null?void 0:e.initialErrors)||{}),P=(n=e==null?void 0:e.keepValuesOnUnmount)!==null&&n!==void 0?n:!1,{initialValues:v,originalInitialValues:c,setInitialValues:S}=xn(r,s,e==null?void 0:e.initialValues),b=Jn(r,s,c,F),E=e==null?void 0:e.validationSchema,V={formId:t,fieldsByPath:r,values:s,errorBag:y,errors:F,schema:E,submitCount:l,meta:b,isSubmitting:a,fieldArrays:m,keepValuesOnUnmount:P,validateSchema:f(E)?mn:void 0,validate:U,register:d,unregister:_,setFieldErrorBag:g,validateField:se,setFieldValue:K,setValues:G,setErrors:W,setFieldError:N,setFieldTouched:ie,setTouched:ne,resetForm:oe,handleSubmit:re,stageInitialValue:cn,unsetInitialValue:pe,setFieldInitialValue:de,useFieldModel:H};function M(u){return Array.isArray(u)}function j(u,o){return Array.isArray(u)?u.forEach(o):o(u)}function k(u){Object.values(r.value).forEach(o=>{!o||j(o,u)})}function N(u,o){g(u,o)}function W(u){A(u)}function K(u,o,{force:O}={force:!1}){var p;const h=r.value[u],T=B(o);if(!h){ae(s,u,T);return}if(M(h)&&((p=h[0])===null||p===void 0?void 0:p.type)==="checkbox"&&!Array.isArray(o)){const x=B(Ce(C(s,u)||[],o,void 0));ae(s,u,x);return}let $=o;!M(h)&&h.type==="checkbox"&&!O&&!i&&($=B(Ce(C(s,u),o,f(h.uncheckedValue)))),ae(s,u,$)}function G(u){D(s).forEach(o=>{delete s[o]}),D(u).forEach(o=>{K(o,u[o])}),m.forEach(o=>o&&o.reset())}function J(u){const{value:o}=sn(u);return X(o,()=>{R(f(u))||U({mode:"validated-only"})},{deep:!0}),o}function H(u){return Array.isArray(u)?u.map(J):J(u)}function ie(u,o){const O=r.value[u];O&&j(O,p=>p.setTouched(o))}function ne(u){D(u).forEach(o=>{ie(o,!!u[o])})}function oe(u){i=!0,u!=null&&u.values?(S(u.values),G(u==null?void 0:u.values)):(S(c.value),G(c.value)),k(o=>o.resetField()),u!=null&&u.touched&&ne(u.touched),W((u==null?void 0:u.errors)||{}),l.value=(u==null?void 0:u.submitCount)||0,ye(()=>{i=!1})}function te(u,o){const O=Vn(u),p=o;if(!r.value[p]){r.value[p]=O;return}const h=r.value[p];h&&!Array.isArray(h)&&(r.value[p]=[h]),r.value[p]=[...r.value[p],O]}function Oe(u,o){const O=o,p=r.value[O];if(!!p){if(!M(p)&&u.id===p.id){delete r.value[O];return}if(M(p)){const h=p.findIndex(T=>T.id===u.id);if(h===-1)return;p.splice(h,1),p.length||delete r.value[O]}}}function d(u){const o=f(u.name);te(u,o),Ae(u.name)&&X(u.name,async(p,h)=>{await ye(),Oe(u,h),te(u,p),(F.value[h]||F.value[p])&&(N(h,void 0),se(p)),await ye(),R(h)||_e(s,h)});const O=f(u.errorMessage);O&&(L==null?void 0:L[o])!==O&&se(o),delete L[o]}function _(u){const o=f(u.name),O=r.value[o],p=!!O&&M(O);Oe(u,o),ye(()=>{var h;const T=(h=f(u.keepValueOnUnmount))!==null&&h!==void 0?h:f(P),$=C(s,o);if(p&&(O===r.value[o]||!r.value[o])&&Array.isArray($)&&!T){const ce=$.findIndex(Y=>Z(Y,f(u.checkedValue)));if(ce>-1){const Y=[...$];Y.splice(ce,1),K(o,Y,{force:!0})}}if(!R(o)){if(N(o,void 0),T||p&&!nn(C(s,o)))return;_e(s,o)}})}async function U(u){if(k(h=>h.meta.validated=!0),V.validateSchema)return V.validateSchema((u==null?void 0:u.mode)||"force");const o=await Promise.all(Object.values(r.value).map(h=>{const T=Array.isArray(h)?h[0]:h;return T?T.validate(u).then($=>({key:f(T.name),valid:$.valid,errors:$.errors})):Promise.resolve({key:"",valid:!0,errors:[]})})),O={},p={};for(const h of o)O[h.key]={valid:h.valid,errors:h.errors},h.errors.length&&(p[h.key]=h.errors[0]);return{valid:o.every(h=>h.valid),results:O,errors:p}}async function se(u){const o=r.value[u];return o?Array.isArray(o)?o.map(O=>O.validate())[0]:o.validate():(Je(`field with name ${u} was not found`),Promise.resolve({errors:[],valid:!0}))}function re(u,o){return function(p){return p instanceof Event&&(p.preventDefault(),p.stopPropagation()),ne(D(r.value).reduce((h,T)=>(h[T]=!0,h),{})),a.value=!0,l.value++,U().then(h=>{if(h.valid&&typeof u=="function")return u(B(s),{evt:p,setErrors:W,setFieldError:N,setTouched:ne,setFieldTouched:ie,setValues:G,setFieldValue:K,resetForm:oe});!h.valid&&typeof o=="function"&&o({values:B(s),evt:p,errors:h.errors,results:h.results})}).then(h=>(a.value=!1,h),h=>{throw a.value=!1,h})}}function de(u,o){ae(v.value,u,B(o))}function pe(u){_e(v.value,u)}function cn(u,o,O=!1){ae(s,u,o),de(u,o),O&&!(e!=null&&e.initialValues)&&ae(c.value,u,B(o))}async function ze(){const u=f(E);return u?ge(u)?await Un(u,s):await zn(u,s,{names:w.value,bailsMap:q.value}):{valid:!0,results:{},errors:{}}}const fn=Le(ze,5),vn=Le(ze,5);async function mn(u){const o=await(u==="silent"?fn():vn()),O=V.fieldsByPath.value||{},p=D(V.errorBag.value);return[...new Set([...D(o.results),...D(O),...p])].reduce((T,$)=>{const x=O[$],ce=(o.results[$]||{errors:[]}).errors,Y={errors:ce,valid:!ce.length};if(T.results[$]=Y,Y.valid||(T.errors[$]=Y.errors[0]),!x)return N($,ce),T;if(j(x,me=>me.meta.valid=Y.valid),u==="silent")return T;const hn=Array.isArray(x)?x.some(me=>me.meta.validated):x.meta.validated;return u==="validated-only"&&!hn||j(x,me=>me.setState({errors:Y.errors})),T},{valid:o.valid,results:{},errors:{}})}const yn=re((u,{evt:o})=>{rn(o)&&o.target.submit()});return Xe(()=>{if(e!=null&&e.initialErrors&&W(e.initialErrors),e!=null&&e.initialTouched&&ne(e.initialTouched),e!=null&&e.validateOnMount){U();return}V.validateSchema&&V.validateSchema("silent")}),Ae(E)&&X(E,()=>{var u;(u=V.validateSchema)===null||u===void 0||u.call(V,"validated-only")}),Qe(le,V),{errors:F,meta:b,values:s,isSubmitting:a,submitCount:l,validate:U,validateField:se,handleReset:()=>oe(),resetForm:oe,handleSubmit:re,submitForm:yn,setFieldError:N,setErrors:W,setFieldValue:K,setValues:G,setFieldTouched:ie,setTouched:ne,useFieldModel:H}}function Jn(e,n,t,i){const r={touched:"some",pending:"some",valid:"every"},a=z(()=>!Z(n,f(t)));function l(){const s=Object.values(e.value).flat(1).filter(Boolean);return D(r).reduce((y,A)=>{const g=r[A];return y[A]=s[g](F=>F.meta[A]),y},{})}const m=Re(l());return gn(()=>{const s=l();m.touched=s.touched,m.valid=s.valid,m.pending=s.pending}),z(()=>Object.assign(Object.assign({initialValues:f(t)},m),{valid:m.valid&&!D(i.value).length,dirty:a.value}))}function xn(e,n,t){const i=Q(B(f(t))||{}),r=Q(B(f(t))||{});function a(l,m=!1){i.value=B(l),r.value=B(l),m&&D(e.value).forEach(s=>{const y=e.value[s],A=Array.isArray(y)?y.some(F=>F.meta.touched):y==null?void 0:y.meta.touched;if(!y||A)return;const g=C(i.value,s);ae(n,s,B(g))})}return Ae(t)&&X(t,l=>{a(l,!0)},{deep:!0}),{initialValues:i,originalInitialValues:r,setInitialValues:a}}function et(e){const n=Q({});function t(a){return Array.isArray(a)?a:a?[a]:[]}function i(a,l){if(!l){delete n.value[a];return}n.value[a]=t(l)}function r(a){n.value=D(a).reduce((l,m)=>{const s=a[m];return s&&(l[m]=t(s)),l},{})}return e&&r(e),{errorBag:n,setErrorBag:r,setFieldErrorBag:i}}const nt=Se({name:"Form",inheritAttrs:!1,props:{as:{type:String,default:"form"},validationSchema:{type:Object,default:void 0},initialValues:{type:Object,default:void 0},initialErrors:{type:Object,default:void 0},initialTouched:{type:Object,default:void 0},validateOnMount:{type:Boolean,default:!1},onSubmit:{type:Function,default:void 0},onInvalidSubmit:{type:Function,default:void 0},keepValues:{type:Boolean,default:!1}},setup(e,n){const t=ee(e,"initialValues"),i=ee(e,"validationSchema"),r=ee(e,"keepValues"),{errors:a,values:l,meta:m,isSubmitting:s,submitCount:y,validate:A,validateField:g,handleReset:F,resetForm:I,handleSubmit:R,setErrors:w,setFieldError:q,setFieldValue:L,setValues:P,setFieldTouched:v,setTouched:c}=Zn({validationSchema:i.value?i:void 0,initialValues:t,initialErrors:e.initialErrors,initialTouched:e.initialTouched,validateOnMount:e.validateOnMount,keepValuesOnUnmount:r}),S=R((j,{evt:k})=>{rn(k)&&k.target.submit()},e.onInvalidSubmit),b=e.onSubmit?R(e.onSubmit,e.onInvalidSubmit):S;function E(j){Ne(j)&&j.preventDefault(),F(),typeof n.attrs.onReset=="function"&&n.attrs.onReset()}function V(j,k){return R(typeof j=="function"&&!k?j:k,e.onInvalidSubmit)(j)}function M(){return{meta:m.value,errors:a.value,values:l,isSubmitting:s.value,submitCount:y.value,validate:A,validateField:g,handleSubmit:V,handleReset:F,submitForm:S,setErrors:w,setFieldError:q,setFieldValue:L,setValues:P,setFieldTouched:v,setTouched:c,resetForm:I}}return n.expose({setFieldError:q,setErrors:w,setFieldValue:L,setValues:P,setFieldTouched:v,setTouched:c,resetForm:I,validate:A,validateField:g}),function(){const k=e.as==="form"?e.as:Be(e.as),N=we(k,n,M);if(!e.as)return N;const W=e.as==="form"?{novalidate:!0}:{};return be(k,Object.assign(Object.assign(Object.assign({},W),n.attrs),{onSubmit:b,onReset:E}),N)}}}),it=nt;function tt(e){const n=Ve(le,void 0),t=Q([]),i=()=>{},r={fields:t,remove:i,push:i,swap:i,insert:i,update:i,replace:i,prepend:i,move:i};if(!n)return Me("FieldArray requires being a child of `<Form/>` or `useForm` being called before it. Array fields may not work correctly"),r;if(!f(e))return Me("FieldArray requires a field path to be provided, did you forget to pass the `name` prop?"),r;const a=n.fieldArrays.find(v=>f(v.path)===f(e));if(a)return a;let l=0;function m(){const v=C(n==null?void 0:n.values,f(e),[])||[];t.value=v.map(y),s()}m();function s(){const v=t.value.length;for(let c=0;c<v;c++){const S=t.value[c];S.isFirst=c===0,S.isLast=c===v-1}}function y(v){const c=l++;return{key:c,value:z({get(){const b=C(n==null?void 0:n.values,f(e),[])||[],E=t.value.findIndex(V=>V.key===c);return E===-1?v:b[E]},set(b){const E=t.value.findIndex(V=>V.key===c);if(E===-1){Me("Attempting to update a non-existent array item");return}w(E,b)}}),isFirst:!1,isLast:!1}}function A(v){const c=f(e),S=C(n==null?void 0:n.values,c);if(!S||!Array.isArray(S))return;const b=[...S];b.splice(v,1),n==null||n.unsetInitialValue(c+`[${v}]`),n==null||n.setFieldValue(c,b),t.value.splice(v,1),s()}function g(v){const c=f(e),S=C(n==null?void 0:n.values,c),b=he(S)?[]:S;if(!Array.isArray(b))return;const E=[...b];E.push(v),n==null||n.stageInitialValue(c+`[${E.length-1}]`,v),n==null||n.setFieldValue(c,E),t.value.push(y(v)),s()}function F(v,c){const S=f(e),b=C(n==null?void 0:n.values,S);if(!Array.isArray(b)||!(v in b)||!(c in b))return;const E=[...b],V=[...t.value],M=E[v];E[v]=E[c],E[c]=M;const j=V[v];V[v]=V[c],V[c]=j,n==null||n.setFieldValue(S,E),t.value=V,s()}function I(v,c){const S=f(e),b=C(n==null?void 0:n.values,S);if(!Array.isArray(b)||b.length<v)return;const E=[...b],V=[...t.value];E.splice(v,0,c),V.splice(v,0,y(c)),n==null||n.setFieldValue(S,E),t.value=V,s()}function R(v){const c=f(e);n==null||n.setFieldValue(c,v),m()}function w(v,c){const S=f(e),b=C(n==null?void 0:n.values,S);!Array.isArray(b)||b.length-1<v||n==null||n.setFieldValue(`${S}[${v}]`,c)}function q(v){const c=f(e),S=C(n==null?void 0:n.values,c),b=he(S)?[]:S;if(!Array.isArray(b))return;const E=[v,...b];n==null||n.stageInitialValue(c+`[${E.length-1}]`,v),n==null||n.setFieldValue(c,E),t.value.unshift(y(v)),s()}function L(v,c){const S=f(e),b=C(n==null?void 0:n.values,S),E=he(b)?[]:[...b];if(!Array.isArray(b)||!(v in b)||!(c in b))return;const V=[...t.value],M=V[v];V.splice(v,1),V.splice(c,0,M);const j=E[v];E.splice(v,1),E.splice(c,0,j),n==null||n.setFieldValue(S,E),t.value=V,s()}const P={fields:t,remove:A,push:g,swap:F,insert:I,update:w,replace:R,prepend:q,move:L};return n.fieldArrays.push(Object.assign({path:e,reset:m},P)),Ze(()=>{const v=n.fieldArrays.findIndex(c=>f(c.path)===f(e));v>=0&&n.fieldArrays.splice(v,1)}),P}Se({name:"FieldArray",inheritAttrs:!1,props:{name:{type:String,required:!0}},setup(e,n){const{push:t,remove:i,swap:r,insert:a,replace:l,update:m,prepend:s,move:y,fields:A}=tt(ee(e,"name"));function g(){return{fields:A.value,push:t,remove:i,swap:r,insert:a,update:m,replace:l,prepend:s,move:y}}return n.expose({push:t,remove:i,swap:r,insert:a,update:m,replace:l,prepend:s,move:y}),()=>we(void 0,n,g)}});Se({name:"ErrorMessage",props:{as:{type:String,default:void 0},name:{type:String,required:!0}},setup(e,n){const t=Ye(le,void 0),i=z(()=>t==null?void 0:t.errors.value[e.name]);function r(){return{message:i.value}}return()=>{if(!i.value)return;const a=e.as?Be(e.as):e.as,l=we(a,n,r),m=Object.assign({role:"alert"},n.attrs);return!a&&(Array.isArray(l)||!l)&&(l==null?void 0:l.length)?l:(Array.isArray(l)||!l)&&!(l!=null&&l.length)?be(a||"span",m,i.value):be(a,m,l)}}});export{it as F,qn as u};
