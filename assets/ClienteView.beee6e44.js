import{d as z,O,j as y,m as L,u as o,D as j,y as e,v as H,x as D,M as d,N as h,a6 as E,a4 as K,a5 as Q,r as V,I as U,o as W,w as X,V as Y,g as Z,ae as ee,n as s,q as i,E as N,a3 as P,a9 as I,k as q,G as S}from"./index.da3217b1.js";import{_ as ae}from"./SpinLoading.61e49bbf.js";import{u as te,F as se}from"./vee-validate.esm.32bc4266.js";import{_ as G}from"./Tag.106c7565.js";import{_ as $}from"./TextInput.vue_vue_type_script_setup_true_lang.845fb3ec.js";const oe=["for"],le=["name","id","value","placeholder","disabled","autocomplete"],ne=z({__name:"SelectInput",props:{initialValue:{type:String,default:""},name:{type:String,required:!0},label:{type:String,required:!0},successMessage:{type:String,default:""},placeholder:{type:String,default:""},autocomplete:{type:String,default:""},disabled:{type:Boolean,default:!1}},setup(c){const k=c,n=O(k,"name"),{value:B,errorMessage:a,handleBlur:m,handleChange:u,meta:r}=te(n,void 0,{initialValue:k.initialValue});return(x,l)=>(y(),L("div",{class:D(["flex flex-col",{"has-error":!!e(a),success:e(r).valid}])},[o("label",{for:e(n)},j(c.label),9,oe),o("select",{name:e(n),id:e(n),value:e(B),placeholder:c.placeholder,onInput:l[0]||(l[0]=(...v)=>e(u)&&e(u)(...v)),onBlur:l[1]||(l[1]=(...v)=>e(m)&&e(m)(...v)),disabled:c.disabled,class:D(["rounded-md border-2 border-transparent outline-none transition duration-300 ease-in-out focus:outline-none focus:ring-0 placeholder:italic",{"bg-slate-200 focus:border-teal-500":!e(a),"bg-red-200 focus:border-red-500 text-red-700 placeholder:text-red-500":!!e(a)}]),autocomplete:c.autocomplete},[H(x.$slots,"default")],42,le),d(o("p",{class:"text-red-500"},j(e(a)),513),[[h,e(a)]]),d(o("p",{class:"text-green-500"},j(c.successMessage),513),[[h,e(r).valid]])],2))}}),ie={key:0,class:"h-full block p-6 shadow-lg bg-white"},re={class:"mb-5"},ce=S(" < Voltar "),ue=S(" Criar cliente "),de={class:"mb-2"},me=S(" Ativo "),pe=S(" Inativo "),fe=o("option",{value:"0"},"F\xEDsico",-1),_e=o("option",{value:"1"},"Jur\xEDdico",-1),he={class:""},ve={class:"flex"},be={class:"flex items-center"},ge=S(" Gravando... "),Ce={key:0,class:"text-red-700 mt-3 mb-0"},Ve={__name:"ClienteView",setup(c){const k=E(),n=K(),B=Q(),a=V({}),m=V(null),u=V(!0),r=U(()=>n.params.id===void 0);W(async()=>{x()}),X(()=>n.params,(b,t)=>{x()},{deep:!0});async function x(){u.value=!0,n.params.id?k.getCliente(n.params.id).then(b=>{const t=b.data;a.value={idCliente:t.idCliente,nome:t.nome,tipo:t.tipo,cnpjCpf:t.cnpjCpf,email:t.usuario.email,senha:""},u.value=!1}):(a.value={tipo:1,usuario:{}},Y(()=>{m.value&&m.value.resetForm()}),u.value=!1)}let l=V(!1);function v(b,{setFieldError:t,setErrors:p,resetForm:M}){p({});const w=E(),{nome:f,tipo:J,cnpjCpf:T,email:F,senha:g}=b,R=T.replaceAll(".","").replaceAll("-","").replaceAll("/","");let C=0;if(f.length===0&&(t("nome","Nome n\xE3o informado."),C++),F.length===0&&(t("email","E-mail n\xE3o informado."),C++),r.value?g.length===0&&(t("senha","Senha n\xE3o informada."),C++):g.length!==0&&g.length<8&&(t("senha","Senha deve ter pelo menos 8 caract\xE9res."),C++),C>0)return;const A=parseInt(J);return l.value=!0,r.value?w.postCliente(f,A,R,F,g).then(_=>{P({group:"ok",title:"Cliente criado com sucesso."}),B.push(`/clientes/${_.data.idCliente}`)}).catch(_=>p({apiError:_})).finally(()=>l.value=!1):w.putCliente(a.value.idCliente,f,A,R,F,g).then(_=>{P({group:"ok",title:"Cliente alterado com sucesso."})}).catch(_=>p({apiError:_})).finally(()=>l.value=!1)}return(b,t)=>{const p=Z("RouterLink"),M=ae,w=ee("mask");return u.value?N("",!0):(y(),L("div",ie,[o("div",re,[s(p,{to:"/clientes"},{default:i(()=>[s(I,{class:"mr-2"},{default:i(()=>[ce]),_:1})]),_:1}),d(s(p,{to:{name:"cliente_novo"}},{default:i(()=>[s(I,{class:""},{default:i(()=>[ue]),_:1})]),_:1},512),[[h,!e(r)]])]),s(e(se),{onSubmit:v,"initial-values":a.value,ref_key:"form",ref:m},{default:i(({errors:f})=>[s($,{name:"nome",type:"text",label:"Nome",placeholder:"Nome",class:"mb-2"}),d(o("div",de,[a.value.situacao===1?(y(),q(G,{key:0,customColor:"green"},{default:i(()=>[me]),_:1})):N("",!0),a.value.situacao===0?(y(),q(G,{key:1,customColor:"orange"},{default:i(()=>[pe]),_:1})):N("",!0)],512),[[h,!e(r)]]),s($,{name:"email",type:"email",label:"E-mail",placeholder:"Endere\xE7o de e-mail",class:"mb-2"}),s(ne,{name:"tipo",label:"Tipo",class:"mb-2"},{default:i(()=>[fe,_e]),_:1}),d(s($,{name:"cnpjCpf",type:"text",label:"CNPJ/CPF",placeholder:"CNPJ/CPF",class:"mb-2"},null,512),[[w,["###.###.###-##","##.###.###/####-##"]]]),s($,{name:"senha",type:"password",label:e(r)?"Senha":"Senha (preencher apenas caso deseje trocar a senha)",autocomplete:"new-password",placeholder:"Senha",class:"mb-4"},null,8,["label"]),o("div",he,[s(I,{disabled:e(l)},{default:i(()=>[d(o("div",ve,[o("div",be,[s(M,{class:"mr-2"}),ge])],512),[[h,e(l)]]),d(o("div",null," Gravar ",512),[[h,!e(l)]])]),_:1},8,["disabled"])]),f.apiError?(y(),L("div",Ce,j(f.apiError),1)):N("",!0)]),_:1},8,["initial-values"])]))}}};export{Ve as default};
