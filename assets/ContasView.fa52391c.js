import{z as B,ad as F,r as p,l as j,a1 as L,j as e,m as n,u as t,G as i,D as v,k as y,q as l,E as w,y as f,M as S,N as V,n as c,K as k,a2 as x,a6 as T,o as Y,a8 as A,V as N}from"./index.78bbede8.js";import{_ as q}from"./SelectInput.vue_vue_type_script_setup_true_lang.a9db5479.js";import{_ as E}from"./SpinLoading.93eac245.js";import{_ as I}from"./BaseModal.62b779d6.js";import{_ as P}from"./Tag.b3b8a315.js";import{_ as z}from"./SpinLoading.75c19d37.js";import"./vee-validate.esm.9d97491c.js";const G={class:"block p-6 mb-3 rounded-lg shadow-lg bg-white"},K={class:"flex flex-row items-center text-gray-900 text-xl leading-tight font-medium break-words mb-2"},O=i(" Aberta "),H=i(" Paga "),J={class:"text-gray-700"},Q={class:"text-base break-words"},R={class:"text-base break-words mt-1"},U={class:"flex flex-wrap mt-2"},W={class:"flex items-center"},X=i(" Pagar "),Z=t("h2",{class:"text-2xl mb-1"},"Pagamento da conta",-1),tt={class:"mb-4"},et=i(" Confirma o pagamento desta conta de "),at=i("? "),ot={class:"mt-4"},st=i(" Pagar "),nt=i(" N\xE3o "),lt={__name:"Conta",props:{conta:{type:Object,required:!0}},setup(s){const h=s,r=B(),C=F(),a=p(null),d=()=>{a.value=!a.value},_=p(!1),b=()=>{_.value=!0,C.encloseConta(h.conta.idConta).then(o=>{h.conta.situacao=1}).catch(o=>notify({group:"error",title:o.message||o})).finally(()=>{_.value=!1,a.value&&(a.value=!1)})},m=j(()=>L(h.conta.dataVencimento,"DD/MM/YYYY").value);return(o,D)=>{const $=I;return e(),n(x,null,[t("div",G,[t("h5",K,[i(v(s.conta.cliente.nome)+" ",1),s.conta.situacao===0?(e(),y(P,{key:0,customColor:"red",class:"ml-2"},{default:l(()=>[O]),_:1})):w("",!0),s.conta.situacao===1?(e(),y(P,{key:1,customColor:"green",class:"ml-2"},{default:l(()=>[H]),_:1})):w("",!0)]),t("div",J,[t("p",Q," Valor: "+v(o.vueNumberFormat(s.conta.valor,{})),1),t("p",R," Data vencimento: "+v(f(m)),1)]),S(t("div",U,[c(k,{customColor:"green",onClick:d},{default:l(()=>[t("div",W,[S(c(z,{class:"mr-3"},null,512),[[V,_.value]]),X])]),_:1})],512),[[V,f(r).user.isAdministrador&&s.conta.situacao===0]])]),c($,{modalActive:a.value,closeButtonVisible:!1,onCloseModal:d},{default:l(()=>[t("div",null,[Z,t("p",tt,[et,t("b",null,v(s.conta.cliente.nome),1),at])]),t("div",ot,[c(k,{onClick:b,customColor:"green",class:"mr-2"},{default:l(()=>[st]),_:1}),c(k,{onClick:d},{default:l(()=>[nt]),_:1})])]),_:1},8,["modalActive"])],64)}}},ct={class:"flex flex-col h-full"},it={class:"p-6"},rt={class:"flex flex-col sm:flex-row"},dt=t("div",{class:"mr-4 text-2xl font-semibold"}," Contas ",-1),ut={class:"flex flex-wrap gap-x-4 gap-y-2 sm:flex-nowrap sm:ml-auto"},_t=t("option",{value:"todos"},"Todos",-1),mt=["value"],ft=t("option",{value:"todas"},"Todas",-1),ht=t("option",{value:"abertas"},"Abertas",-1),gt=t("option",{value:"pagas"},"Pagas",-1),vt={key:0,class:"flex-1 flex flex-row justify-center items-center"},xt={class:"flex items-center"},pt=t("p",{class:"text-xl text-teal-600"}," Carregando... ",-1),Ct={class:"flex flex-col justify-center pt-6"},bt={key:0,class:"text-xl px-6"},At={__name:"ContasView",emits:["closeMenu"],setup(s){const h=B(),r=F(),C=T();function a(){r.getContas(o,m)}Y(()=>{h.user.idAdministrador&&b(),a()});const d=p([]),_=p(!1);function b(){_.value=!1,C.getClientesSimples().then(u=>{d.value=u.data}).finally(_.value=!0)}let m=0,o=null;async function D(u){o=u.target.value==="todos"?null:u.target.value,N(()=>{a()})}async function $(u){switch(u.target.value){case"abertas":m=0;break;case"pagas":m=1;break;default:m=null}N(()=>{a()})}return(u,$t)=>{const M=q;return e(),n("div",ct,[t("div",it,[t("div",rt,[dt,t("div",ut,[S(c(M,{name:"idCliente",label:"Cliente",onChange:D,initialValue:"todos"},{default:l(()=>[_t,(e(!0),n(x,null,A(d.value,g=>(e(),n("option",{value:g.idCliente},v(g.nome),9,mt))),256))]),_:1},512),[[V,d.value.length>0]]),c(M,{disabled:!f(r).contasLoaded,name:"filtroSituacao",label:"Situa\xE7\xE3o",initialValue:"abertas",onChange:$},{default:l(()=>[ft,ht,gt]),_:1},8,["disabled"])])]),f(r).contasLoaded?(e(),n(x,{key:1},[t("div",Ct,[(e(!0),n(x,null,A(f(r).contas,g=>(e(),y(lt,{key:g.idConta,conta:g},null,8,["conta"]))),128))]),f(r).contas.length?w("",!0):(e(),n("div",bt," N\xE3o h\xE1 nenhuma conta. "))],64)):(e(),n("div",vt,[t("div",xt,[c(E,{height:8,width:8,color:"text-teal-600",class:"mr-3"}),pt])]))])])}}};export{At as default};
