import{z as B,ad as F,r as x,l as j,a1 as L,j as e,m as n,u as t,G as i,D as v,k as y,q as l,E as S,y as f,M as w,N as V,n as c,K as $,a2 as p,a6 as T,o as Y,a8 as A,V as N}from"./index.d52f0d7c.js";import{_ as q}from"./SelectInput.vue_vue_type_script_setup_true_lang.053b1048.js";import{_ as E}from"./SpinLoading.e64e9497.js";import{_ as I}from"./BaseModal.c6db81e1.js";import{_ as P}from"./Tag.797ffd50.js";import{_ as z}from"./SpinLoading.b901e837.js";import"./vee-validate.esm.84af39ca.js";const G={class:"block p-6 mb-3 rounded-lg shadow-lg bg-white"},K={class:"flex flex-row items-center text-gray-900 text-xl leading-tight font-medium break-words mb-2"},O=i(" Aberta "),H=i(" Paga "),J={class:"text-gray-700"},Q={class:"text-base break-words"},R={class:"text-base break-words mt-1"},U={class:"flex flex-wrap mt-2"},W={class:"flex items-center"},X=i(" Pagar "),Z=t("h2",{class:"text-2xl mb-1"},"Pagamento da conta",-1),tt={class:"mb-4"},et=i(" Confirma o pagamento desta conta de "),at=i("? "),ot={class:"mt-4"},st=i(" Pagar "),nt=i(" N\xE3o "),lt={__name:"Conta",props:{conta:{type:Object,required:!0}},setup(s){const h=s,r=B(),C=F(),a=x(null),d=()=>{a.value=!a.value},_=x(!1),b=()=>{_.value=!0,C.encloseConta(h.conta.idConta).then(o=>{h.conta.situacao=1}).catch(o=>notify({group:"error",title:o.message||o})).finally(()=>{_.value=!1,a.value&&(a.value=!1)})},m=j(()=>L(h.conta.dataVencimento,"DD/MM/YYYY").value);return(o,D)=>{const k=I;return e(),n(p,null,[t("div",G,[t("h5",K,[i(v(s.conta.cliente.nome)+" ",1),s.conta.situacao===0?(e(),y(P,{key:0,customColor:"red",class:"ml-2"},{default:l(()=>[O]),_:1})):S("",!0),s.conta.situacao===1?(e(),y(P,{key:1,customColor:"green",class:"ml-2"},{default:l(()=>[H]),_:1})):S("",!0)]),t("div",J,[t("p",Q," Valor: "+v(o.vueNumberFormat(s.conta.valor,{})),1),t("p",R," Data vencimento: "+v(f(m)),1)]),w(t("div",U,[c($,{customColor:"green",onClick:d},{default:l(()=>[t("div",W,[w(c(z,{class:"mr-3"},null,512),[[V,_.value]]),X])]),_:1})],512),[[V,f(r).user.isAdministrador&&s.conta.situacao===0]])]),c(k,{modalActive:a.value,closeButtonVisible:!1,onCloseModal:d},{default:l(()=>[t("div",null,[Z,t("p",tt,[et,t("b",null,v(s.conta.cliente.nome),1),at])]),t("div",ot,[c($,{onClick:b,customColor:"green",class:"mr-2"},{default:l(()=>[st]),_:1}),c($,{onClick:d},{default:l(()=>[nt]),_:1})])]),_:1},8,["modalActive"])],64)}}},ct={class:"h-full"},it={class:"flex flex-col sm:flex-row pt-6 pl-6 pr-6"},rt=t("div",{class:"mr-4 text-2xl font-semibold"}," Contas ",-1),dt={class:"flex sm:ml-auto"},ut=t("option",{value:"todos"},"Todos",-1),_t=["value"],mt=t("option",{value:"todas"},"Todas",-1),ft=t("option",{value:"abertas"},"Abertas",-1),ht=t("option",{value:"pagas"},"Pagas",-1),gt={key:0,class:"h-full flex flex-row justify-center items-center"},vt={class:"flex items-center"},pt=t("p",{class:"text-xl text-teal-600"}," Carregando... ",-1),xt={class:"flex flex-col justify-center p-6"},Ct={key:0,class:"text-xl px-6 py-6"},Mt={__name:"ContasView",emits:["closeMenu"],setup(s){const h=B(),r=F(),C=T();function a(){r.getContas(o,m)}Y(()=>{h.user.idAdministrador&&b(),a()});const d=x([]),_=x(!1);function b(){_.value=!1,C.getClientesSimples().then(u=>{d.value=u.data}).finally(_.value=!0)}let m=0,o=null;async function D(u){o=u.target.value==="todos"?null:u.target.value,N(()=>{a()})}async function k(u){switch(u.target.value){case"abertas":m=0;break;case"pagas":m=1;break;default:m=null}N(()=>{a()})}return(u,bt)=>{const M=q;return e(),n("div",ct,[t("div",it,[rt,t("div",dt,[w(c(M,{name:"idCliente",label:"Cliente",onChange:D,initialValue:"todos",class:"mb-2"},{default:l(()=>[ut,(e(!0),n(p,null,A(d.value,g=>(e(),n("option",{value:g.idCliente},v(g.nome),9,_t))),256))]),_:1},512),[[V,d.value.length>0]]),c(M,{disabled:!f(r).contasLoaded,name:"filtroSituacao",label:"Situa\xE7\xE3o",initialValue:"abertas",onChange:k,class:"ml-4"},{default:l(()=>[mt,ft,ht]),_:1},8,["disabled"])])]),f(r).contasLoaded?(e(),n(p,{key:1},[t("div",xt,[(e(!0),n(p,null,A(f(r).contas,g=>(e(),y(lt,{key:g.idConta,conta:g},null,8,["conta"]))),128))]),f(r).contas.length?S("",!0):(e(),n("div",Ct," N\xE3o h\xE1 nenhum conta. "))],64)):(e(),n("div",gt,[t("div",vt,[c(E,{height:8,width:8,color:"text-teal-600",class:"mr-3"}),pt])]))])}}};export{Mt as default};
