import{z as B,ad as F,r as p,l as j,a1 as L,j as e,m as n,u as t,G as i,D as v,k as y,q as l,E as w,y as f,M as S,N as V,n as c,K as k,a2 as x,a3 as T,a6 as Y,o as q,a8 as A,V as N}from"./index.038c8212.js";import{_ as E}from"./SelectInput.vue_vue_type_script_setup_true_lang.b2f56bff.js";import{_ as I}from"./SpinLoading.5aa2b1d3.js";import{_ as z}from"./BaseModal.2aa0cada.js";import{_ as P}from"./Tag.6d28a408.js";import{_ as G}from"./SpinLoading.3f6d8973.js";import"./vee-validate.esm.894363cd.js";const K={class:"block p-6 mb-3 rounded-lg shadow-lg bg-white"},O={class:"flex flex-row items-center text-gray-900 text-xl leading-tight font-medium break-words mb-2"},H=i(" Aberta "),J=i(" Paga "),Q={class:"text-gray-700"},R={class:"text-base break-words"},U={class:"text-base break-words mt-1"},W={class:"flex flex-wrap mt-2"},X={class:"flex items-center"},Z=i(" Pagar "),tt=t("h2",{class:"text-2xl mb-1"},"Pagamento da conta",-1),et={class:"mb-4"},at=i(" Confirma o pagamento desta conta de "),ot=i("? "),st={class:"mt-4"},nt=i(" Pagar "),lt=i(" N\xE3o "),ct={__name:"Conta",props:{conta:{type:Object,required:!0}},setup(s){const h=s,r=B(),C=F(),a=p(null),d=()=>{a.value=!a.value},_=p(!1),b=()=>{_.value=!0,C.encloseConta(h.conta.idConta).then(o=>{h.conta.situacao=1}).catch(o=>T({group:"error",title:o.message||o})).finally(()=>{_.value=!1,a.value&&(a.value=!1)})},m=j(()=>L(h.conta.dataVencimento,"DD/MM/YYYY").value);return(o,D)=>{const $=z;return e(),n(x,null,[t("div",K,[t("h5",O,[i(v(s.conta.cliente.nome)+" ",1),s.conta.situacao===0?(e(),y(P,{key:0,customColor:"red",class:"ml-2"},{default:l(()=>[H]),_:1})):w("",!0),s.conta.situacao===1?(e(),y(P,{key:1,customColor:"green",class:"ml-2"},{default:l(()=>[J]),_:1})):w("",!0)]),t("div",Q,[t("p",R," Valor: "+v(o.vueNumberFormat(s.conta.valor,{})),1),t("p",U," Data vencimento: "+v(f(m)),1)]),S(t("div",W,[c(k,{customColor:"green",onClick:d},{default:l(()=>[t("div",X,[S(c(G,{class:"mr-3"},null,512),[[V,_.value]]),Z])]),_:1})],512),[[V,f(r).user.isAdministrador&&s.conta.situacao===0]])]),c($,{modalActive:a.value,closeButtonVisible:!1,onCloseModal:d},{default:l(()=>[t("div",null,[tt,t("p",et,[at,t("b",null,v(s.conta.cliente.nome),1),ot])]),t("div",st,[c(k,{onClick:b,customColor:"green",class:"mr-2"},{default:l(()=>[nt]),_:1}),c(k,{onClick:d},{default:l(()=>[lt]),_:1})])]),_:1},8,["modalActive"])],64)}}},it={class:"flex flex-col h-full"},rt={class:"p-6"},dt={class:"flex flex-col sm:flex-row"},ut=t("div",{class:"mr-4 text-2xl font-semibold"}," Contas ",-1),_t={class:"flex flex-wrap gap-x-4 gap-y-2 sm:flex-nowrap sm:ml-auto"},mt=t("option",{value:"todos"},"Todos",-1),ft=["value"],ht=t("option",{value:"todas"},"Todas",-1),gt=t("option",{value:"abertas"},"Abertas",-1),vt=t("option",{value:"pagas"},"Pagas",-1),xt={key:0,class:"flex-1 flex flex-row justify-center items-center"},pt={class:"flex items-center"},Ct=t("p",{class:"text-xl text-teal-600"}," Carregando... ",-1),bt={class:"flex flex-col justify-center pt-6"},$t={key:0,class:"text-xl px-6"},Nt={__name:"ContasView",emits:["closeMenu"],setup(s){const h=B(),r=F(),C=Y();function a(){r.getContas(o,m)}q(()=>{h.user.idAdministrador&&b(),a()});const d=p([]),_=p(!1);function b(){_.value=!1,C.getClientesSimples().then(u=>{d.value=u.data}).finally(_.value=!0)}let m=0,o=null;async function D(u){o=u.target.value==="todos"?null:u.target.value,N(()=>{a()})}async function $(u){switch(u.target.value){case"abertas":m=0;break;case"pagas":m=1;break;default:m=null}N(()=>{a()})}return(u,kt)=>{const M=E;return e(),n("div",it,[t("div",rt,[t("div",dt,[ut,t("div",_t,[S(c(M,{name:"idCliente",label:"Cliente",onChange:D,initialValue:"todos"},{default:l(()=>[mt,(e(!0),n(x,null,A(d.value,g=>(e(),n("option",{value:g.idCliente},v(g.nome),9,ft))),256))]),_:1},512),[[V,d.value.length>0]]),c(M,{disabled:!f(r).contasLoaded,name:"filtroSituacao",label:"Situa\xE7\xE3o",initialValue:"abertas",onChange:$},{default:l(()=>[ht,gt,vt]),_:1},8,["disabled"])])]),f(r).contasLoaded?(e(),n(x,{key:1},[t("div",bt,[(e(!0),n(x,null,A(f(r).contas,g=>(e(),y(ct,{key:g.idConta,conta:g},null,8,["conta"]))),128))]),f(r).contas.length?w("",!0):(e(),n("div",$t," N\xE3o h\xE1 nenhuma conta. "))],64)):(e(),n("div",xt,[t("div",pt,[c(I,{height:8,width:8,color:"text-teal-600",class:"mr-3"}),Ct])]))])])}}};export{Nt as default};
